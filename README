Here is a cleaned-up, copy-friendly version of your README.
I standardized formatting, ensured all code blocks render properly, and made headings consistent.

---

# MongoDB and mongo-express Deployment Using Secret and ConfigMap (Kubernetes Manifests)

This repository provides simple Kubernetes manifests for deploying a single MongoDB instance and a mongo-express UI connected to it. These manifests are intentionally minimal and ideal for quick testing or local development.

## What’s Included

* **`mongo-secret.yaml`**
  Creates an Opaque Secret containing the MongoDB root username and password (base64-encoded).

* **`mongo-configmap.yaml`**
  Provides the MongoDB service address consumed by mongo-express.

* **`mongo.yaml`**

  * **Deployment**: Single-replica MongoDB container, reading credentials from the Secret via:

    * `MONGO_INITDB_ROOT_USERNAME`
    * `MONGO_INITDB_ROOT_PASSWORD`
  * **Service**: ClusterIP service `mongodb-service` exposing port `27017`.

* **`mongo-express.yaml`**

  * **Deployment**: Single-replica `mongo-express` container that:

    * Reads admin username/password from the Secret.
    * Reads DB service address from the ConfigMap.
    * Builds the connection URI using `ME_CONFIG_MONGODB_URL`.
  * **Service**: `mongo-express-service`, type `LoadBalancer`, port `8081`, also exposing a NodePort (`30000`) for local clusters.

## Prerequisites

* A Kubernetes cluster (minikube, kind, or cloud provider).
* `kubectl` configured to access your cluster.
* For local clusters without a load balancer:
  Use `minikube service`, `kubectl port-forward`, or access via NodePort `30000`.

## Deployment Steps (Recommended Order)

> Secrets must exist before Deployments so environment variables are available when pods start.

### 1. Create the Secret

´´´bash
kubectl apply -f mongo-secret.yaml
´´´

### 2. Create the ConfigMap

```bash
kubectl apply -f mongo-configmap.yaml
```

### 3. Deploy MongoDB (Deployment + Service)

```bash
kubectl apply -f mongo.yaml
```

### 4. Deploy mongo-express (Deployment + Service)

```bash
kubectl apply -f mongo-express.yaml
```

## Verifying Resources

### Check Pods

```bash
kubectl get pods
```

### Check Services

```bash
kubectl get svc
```

### View Pod Logs

```bash
kubectl logs <pod-name>
```

## Accessing mongo-express

### Cloud LoadBalancer

```bash
kubectl get svc mongo-express-service
```

### Minikube / Local Cluster

```bash
minikube service mongo-express-service
```

or

```bash
kubectl port-forward svc/mongo-express-service 8081:8081
```

### NodePort (if reachable)

```
http://<node-ip>:30000
```

## Default Credentials

These values come from `mongo-secret.yaml`:

### Username

Base64: `dXNlcm5hbWU=`

```bash
echo 'dXNlcm5hbWU=' | base64 --decode
```

### Password

Base64: `cGFzc3dvcmQ=`

```bash
echo 'cGFzc3dvcmQ=' | base64 --decode
```

## Updating Secrets

```bash
kubectl create secret generic mongodb-secret \
  --from-literal=mongo-root-username=youruser \
  --from-literal=mongo-root-password=yourpass \
  --dry-run=client -o yaml | kubectl apply -f -
```

Restart deployments if pods need to pick up new environment variables:

```bash
kubectl rollout restart deployment/mongodb-deployment
kubectl rollout restart deployment/mongo-express
```

## Troubleshooting

### mongo-express Cannot Connect to MongoDB

* Check that the service exists and routes correctly:

  ```bash
  kubectl get svc,pods -o wide
  ```
* Verify secret values are correct.
* Check logs:

  ```bash
  kubectl logs deployment/mongo-express
  ```

### MongoDB CrashLoopBackOff

* View logs:

  ```bash
  kubectl logs <mongodb-pod>
  ```
* Check environment variables:

  ```bash
  kubectl describe pod <pod>
  ```

## License

MIT

---

If you'd like, I can also generate a cleaner folder structure, add diagrams, or include full sample YAML files.
